(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[120],{1333:function(e,a,t){Promise.resolve().then(t.bind(t,2960))},2960:function(e,a,t){"use strict";t.d(a,{default:function(){return ei}});var r,n,s,c,l=t(7437),o=t(2265),i=t(9807),d=t(5595);function h(e){let a={h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,d.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.h1,{children:"An Implementation of the Dominion Board Game"}),"\n",(0,l.jsx)(a.p,{children:"This is a fully playable implementation of the classic Dominion deck-building game, built with React and TypeScript. The game supports 2 players and includes all the core mechanics from the original game."}),"\n",(0,l.jsx)(a.h2,{children:"How to Play"}),"\n",(0,l.jsx)(a.p,{children:"Dominion is a deck-building game where players start with identical decks and purchase cards from a shared supply to build unique strategies. Each turn consists of three phases:"}),"\n",(0,l.jsxs)(a.ol,{children:["\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.strong,{children:"Action Phase"}),": Play one Action card (if you have one and choose to)"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.strong,{children:"Buy Phase"}),": Play Treasure cards and buy one card from the supply"]}),"\n",(0,l.jsxs)(a.li,{children:[(0,l.jsx)(a.strong,{children:"Clean-up Phase"}),": Discard all cards and draw a new hand of 5 cards"]}),"\n"]}),"\n",(0,l.jsx)(a.p,{children:"The game ends when 3 supply piles are empty or the Province pile is empty. The player with the most Victory Points wins!"}),"\n",(0,l.jsx)(a.h2,{children:"Game Implementation"}),"\n",(0,l.jsx)(a.p,{children:"The game below includes:"}),"\n",(0,l.jsxs)(a.ul,{children:["\n",(0,l.jsx)(a.li,{children:"All basic cards (Copper, Silver, Gold, Estate, Duchy, Province, Curse)"}),"\n",(0,l.jsx)(a.li,{children:"10 Kingdom cards from the base set"}),"\n",(0,l.jsx)(a.li,{children:"Full turn management and game state tracking"}),"\n",(0,l.jsx)(a.li,{children:"Automatic deck shuffling and card drawing"}),"\n",(0,l.jsx)(a.li,{children:"Victory point calculation and game end detection"}),"\n"]}),"\n",(0,l.jsx)(a.p,{children:'Click "Start New Game" to begin playing!'})]})}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:a}={...(0,d.a)(),...e.components};return a?(0,l.jsx)(a,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}(r=s||(s={})).TREASURE="treasure",r.VICTORY="victory",r.ACTION="action",r.CURSE="curse",(n=c||(c={})).ACTION="action",n.BUY="buy",n.CLEANUP="cleanup";let u=[{name:"Copper",cost:0,effect:"1 Coin",type:s.TREASURE,coins:1},{name:"Silver",cost:3,effect:"2 Coins",type:s.TREASURE,coins:2},{name:"Gold",cost:6,effect:"3 Coins",type:s.TREASURE,coins:3},{name:"Estate",cost:2,effect:"1 Victory Point",type:s.VICTORY,victoryPoints:1},{name:"Duchy",cost:5,effect:"3 Victory Points",type:s.VICTORY,victoryPoints:3},{name:"Province",cost:8,effect:"6 Victory Points",type:s.VICTORY,victoryPoints:6},{name:"Curse",cost:0,effect:"-1 Victory Point",type:s.CURSE,victoryPoints:-1},{name:"Cellar",cost:2,effect:"+1 Action. Discard any number of cards then draw that many.",type:s.ACTION,actions:1},{name:"Chapel",cost:2,effect:"Trash up to 4 cards from your hand.",type:s.ACTION},{name:"Moat",cost:2,effect:"+2 Cards. Reaction: When another player plays an Attack card you may reveal this from your hand to be unaffected by it.",type:s.ACTION,cards:2},{name:"Harbinger",cost:3,effect:"+1 Card +1 Action. Look through your discard pile. You may put a card from it onto your deck.",type:s.ACTION,cards:1,actions:1},{name:"Merchant",cost:3,effect:"+1 Card +1 Action. The first time you play a Silver this turn +1 Coin.",type:s.ACTION,cards:1,actions:1},{name:"Vassal",cost:3,effect:"+2 Coins. Discard the top card of your deck. If it's an Action card you may play it.",type:s.ACTION,coins:2},{name:"Village",cost:3,effect:"+1 Card +2 Actions.",type:s.ACTION,cards:1,actions:2},{name:"Workshop",cost:3,effect:"Gain a card costing up to 4 Coins.",type:s.ACTION},{name:"Bureaucrat",cost:4,effect:"Gain a Silver onto your deck. Each other player reveals a Victory card from their hand and puts it onto their deck (or reveals a hand with no Victory cards).",type:s.ACTION},{name:"Gardens",cost:4,effect:"Worth 1 Victory Point per 10 cards you have (rounded down).",type:s.VICTORY},{name:"Militia",cost:4,effect:"+2 Coins. Each other player discards down to 3 cards in hand.",type:s.ACTION,coins:2},{name:"Moneylender",cost:4,effect:"You may trash a Copper from your hand. If you do +3 Coins.",type:s.ACTION},{name:"Poacher",cost:4,effect:"+1 Card +1 Action +1 Coin. Discard a card per empty Supply pile.",type:s.ACTION,cards:1,actions:1,coins:1},{name:"Remodel",cost:4,effect:"Trash a card from your hand. Gain a card costing up to 2 Coins more than the trashed card.",type:s.ACTION},{name:"Smithy",cost:4,effect:"+3 Cards.",type:s.ACTION,cards:3},{name:"Throne Room",cost:4,effect:"You may play an Action card from your hand twice.",type:s.ACTION},{name:"Bandit",cost:5,effect:"Gain a Gold. Each other player reveals the top 2 cards of their deck trashes a revealed Treasure other than Copper and discards the rest.",type:s.ACTION},{name:"Council Room",cost:5,effect:"+4 Cards +1 Buy. Each other player draws a card.",type:s.ACTION,cards:4,buys:1},{name:"Festival",cost:5,effect:"+2 Actions +1 Buy +2 Coins.",type:s.ACTION,actions:2,buys:1,coins:2},{name:"Laboratory",cost:5,effect:"+2 Cards +1 Action.",type:s.ACTION,cards:2,actions:1},{name:"Library",cost:5,effect:"Draw until you have 7 cards in hand skipping any Action cards you choose to; set those aside discarding them afterwards.",type:s.ACTION},{name:"Market",cost:5,effect:"+1 Card +1 Action +1 Buy +1 Coin.",type:s.ACTION,cards:1,actions:1,buys:1,coins:1},{name:"Mine",cost:5,effect:"You may trash a Treasure from your hand. Gain a Treasure to your hand costing up to 3 Coins more than it.",type:s.ACTION},{name:"Sentry",cost:5,effect:"+1 Card +1 Action. Look at the top 2 cards of your deck. Trash and/or discard any of them. Put the rest back on top in any order.",type:s.ACTION,cards:1,actions:1},{name:"Witch",cost:5,effect:"+2 Cards. Each other player gains a Curse card.",type:s.ACTION,cards:2},{name:"Artisan",cost:6,effect:"Gain a card to your hand costing up to 5 Coins. Put a card from your hand onto your deck.",type:s.ACTION}],m=e=>u.find(a=>a.name===e),g=()=>u.filter(e=>e.type===s.ACTION),y=()=>u.find(e=>"Curse"===e.name),f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return[...g()].sort(()=>Math.random()-.5).slice(0,e)},x=e=>{let a=[...e];for(let e=a.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[a[e],a[t]]=[a[t],a[e]]}return a},b=(e,a)=>{let t=[];for(let r=0;r<a;r++){if(0===e.deck.length){if(0===e.discard.length)break;e.deck=x(e.discard),e.discard=[]}if(e.deck.length>0){let a=e.deck.pop();t.push(a)}}e.hand.push(...t)},C=()=>{let e=[];for(let a=0;a<7;a++)e.push(m("Copper"));for(let a=0;a<3;a++)e.push(m("Estate"));return x(e)},v=e=>{let a={};return a.Copper=Array(46).fill(null).map(()=>m("Copper")),a.Silver=Array(40).fill(null).map(()=>m("Silver")),a.Gold=Array(30).fill(null).map(()=>m("Gold")),a.Estate=Array(8).fill(null).map(()=>m("Estate")),a.Duchy=Array(8).fill(null).map(()=>m("Duchy")),a.Province=Array(8).fill(null).map(()=>m("Province")),a.Curse=Array(10).fill(null).map(()=>y()),e.forEach(e=>{a[e.name]=Array(10).fill(null).map(()=>({...e}))}),a},k=()=>{let e=v(f(10)),a=[{id:1,name:"Player 1",hand:[],deck:C(),discard:[],playArea:[],actions:1,buys:1,coins:0},{id:2,name:"Player 2",hand:[],deck:C(),discard:[],playArea:[],actions:1,buys:1,coins:0}];return a.forEach(e=>{b(e,5)}),{players:a,currentPlayer:0,phase:c.ACTION,supply:e,trash:[],gameLog:["Game started!","Player 1's turn begins."],gameEnded:!1,pendingChoice:void 0}},N=e=>{let a=0,t=[...e.hand,...e.deck,...e.discard];return t.forEach(e=>{"Gardens"===e.name?a+=Math.floor(t.length/10):void 0!==e.victoryPoints&&(a+=e.victoryPoints)}),a},j=e=>{let a=e.supply;return 0===a.Province.length||Object.values(a).filter(e=>0===e.length).length>=3},A=e=>{let a=N(e.players[0]),t=N(e.players[1]);return a>t?0:t>a?1:null},T=e=>{let a={...e,players:e.players.map((e,a)=>({...e,hand:[...e.hand],playArea:[...e.playArea],deck:[...e.deck],discard:[...e.discard]})),gameLog:[...e.gameLog]},t=a.players[a.currentPlayer];if(t.discard.push(...t.hand,...t.playArea),t.hand=[],t.playArea=[],b(t,5),t.actions=1,t.buys=1,t.coins=0,a.currentPlayer=(a.currentPlayer+1)%2,a.phase=c.ACTION,a.gameLog.push("".concat(t.name," ends their turn.")),a.gameLog.push("".concat(a.players[a.currentPlayer].name,"'s turn begins.")),j(a)){var r;a.gameEnded=!0,a.winner=null!==(r=A(a))&&void 0!==r?r:void 0}return a},I=(e,a)=>{let t={...e,players:e.players.map((e,a)=>({...e,hand:[...e.hand],playArea:[...e.playArea],deck:[...e.deck],discard:[...e.discard]})),gameLog:[...e.gameLog]},r=t.players[t.currentPlayer];if(a<0||a>=r.hand.length)return e;let n=r.hand[a];return n.type!==s.TREASURE?e:(r.hand.splice(a,1),r.playArea.push(n),n.coins&&(r.coins+=n.coins),t.gameLog.push("".concat(r.name," plays ").concat(n.name," for ").concat(n.coins," coin(s).")),t)},P=(e,a)=>{let t={...e,players:e.players.map((e,a)=>({...e,hand:[...e.hand],playArea:[...e.playArea],deck:[...e.deck],discard:[...e.discard]})),supply:Object.fromEntries(Object.entries(e.supply).map(e=>{let[a,t]=e;return[a,[...t]]})),gameLog:[...e.gameLog]},r=t.players[t.currentPlayer],n=t.supply;if(!n[a]||0===n[a].length)return e;let s=n[a][0];return r.coins<s.cost||r.buys<1?e:(n[a].shift(),r.discard.push(s),r.coins-=s.cost,r.buys-=1,t.gameLog.push("".concat(r.name," buys ").concat(s.name,".")),t)},w=(e,a)=>{let t={...e},r=t.players[t.currentPlayer];return a.cards&&(b(r,a.cards),t.gameLog.push("".concat(r.name," draws ").concat(a.cards," card(s)."))),a.actions&&(r.actions+=a.actions,t.gameLog.push("".concat(r.name," gets +").concat(a.actions," action(s)."))),a.buys&&(r.buys+=a.buys,t.gameLog.push("".concat(r.name," gets +").concat(a.buys," buy(s)."))),a.coins&&(r.coins+=a.coins,t.gameLog.push("".concat(r.name," gets +").concat(a.coins," coin(s)."))),t},O=(e,a)=>{let t={...e,players:e.players.map((e,a)=>({...e,hand:[...e.hand],playArea:[...e.playArea],deck:[...e.deck],discard:[...e.discard]})),supply:Object.fromEntries(Object.entries(e.supply).map(e=>{let[a,t]=e;return[a,[...t]]})),trash:[...e.trash],gameLog:[...e.gameLog]},r=t.players[t.currentPlayer];if(a<0||a>=r.hand.length)return e;let n=r.hand[a];if(n.type!==s.ACTION||r.actions<1)return e;switch(r.hand.splice(a,1),r.playArea.push(n),r.actions-=1,t.gameLog.push("".concat(r.name," plays ").concat(n.name,".")),n.name){case"Cellar":return E(t);case"Chapel":return L(t);case"Harbinger":return V(t);case"Merchant":return D(t);case"Vassal":return Y(t);case"Workshop":return S(t);case"Bureaucrat":return H(t);case"Militia":return R(t);case"Moneylender":return G(t);case"Poacher":return W(t);case"Remodel":return U(t);case"Throne Room":return _(t);case"Bandit":return q(t);case"Library":return Z(t);case"Mine":return B(t);case"Sentry":return F(t);case"Witch":return M(t);case"Artisan":return z(t);default:return w(t,n)}},E=e=>{let a=w(e,{name:"Cellar",cost:2,effect:"",type:s.ACTION,actions:1,cards:0}),t=a.players[a.currentPlayer];return t.hand.length>0&&(a.pendingChoice={type:"discard",playerId:a.currentPlayer,prompt:"Choose any number of cards to discard (you will draw that many)",options:t.hand.map((e,a)=>({card:e,index:a})),min:0,max:t.hand.length,callback:"cellarDiscard"}),a},L=e=>{let a=e.players[e.currentPlayer];return a.hand.length>0&&(e.pendingChoice={type:"trash",playerId:e.currentPlayer,prompt:"Choose up to 4 cards to trash",options:a.hand.map((e,a)=>({card:e,index:a})),min:0,max:Math.min(4,a.hand.length),callback:"chapelTrash"}),e},S=e=>{let a=Object.entries(e.supply).filter(e=>{let[a,t]=e;return t.length>0&&m(a).cost<=4}).map(e=>{let[a]=e;return a});return a.length>0&&(e.pendingChoice={type:"gain",playerId:e.currentPlayer,prompt:"Choose a card to gain (costing up to 4)",options:a,min:1,max:1,callback:"workshopGain"}),e},R=e=>{let a=w(e,{name:"Militia",cost:4,effect:"",type:s.ACTION,coins:2}),t=(a.currentPlayer+1)%2,r=a.players[t];if(r.hand.length>3){let e=r.hand.length-3;a.pendingChoice={type:"discard",playerId:t,prompt:"Choose ".concat(e," card(s) to discard"),options:r.hand.map((e,a)=>({card:e,index:a})),min:e,max:e,callback:"militiaDiscard"}}return a},G=e=>{let a=e.players[e.currentPlayer],t=a.hand.findIndex(e=>"Copper"===e.name);if(-1!==t){let r=a.hand.splice(t,1)[0];e.trash.push(r),a.coins+=3,e.gameLog.push("".concat(a.name," trashes a Copper and gets +3 coins."))}else e.gameLog.push("".concat(a.name," has no Copper to trash."));return e},B=e=>{let a=e.players[e.currentPlayer],t=a.hand.filter(e=>e.type===s.TREASURE);if(0===t.length)return e.gameLog.push("".concat(a.name," has no treasures to upgrade.")),e;let r=null,n=null,c=t.find(e=>"Copper"===e.name);c&&e.supply.Silver.length>0&&(r=c,n="Silver");let l=t.find(e=>"Silver"===e.name);if(l&&e.supply.Gold.length>0&&(r=l,n="Gold"),r&&n){let t=a.hand.indexOf(r);a.hand.splice(t,1),e.trash.push(r);let s=e.supply[n].shift();a.hand.push(s),e.gameLog.push("".concat(a.name," trashes ").concat(r.name," and gains ").concat(n," to hand."))}else e.gameLog.push("".concat(a.name," cannot upgrade any treasures."));return e},U=e=>{let a=e.players[e.currentPlayer];return a.hand.length>0&&(e.pendingChoice={type:"trash",playerId:e.currentPlayer,prompt:"Choose a card to trash (you will gain a card costing up to 2 more)",options:a.hand.map((e,a)=>({card:e,index:a})),min:0,max:1,callback:"remodelTrash"}),e},M=e=>{let a=w(e,{name:"Witch",cost:5,effect:"",type:s.ACTION,cards:2}),t=(a.currentPlayer+1)%2,r=a.players[t];if(a.supply.Curse.length>0){let e=a.supply.Curse.shift();r.discard.push(e),a.gameLog.push("".concat(r.name," gains a Curse."))}return a},V=e=>{let a=w(e,{name:"Harbinger",cost:3,effect:"",type:s.ACTION,cards:1,actions:1}),t=a.players[a.currentPlayer];return t.discard.length>0&&(a.pendingChoice={type:"order",playerId:a.currentPlayer,prompt:"Choose a card from your discard pile to put on top of your deck (or none)",options:t.discard.map((e,a)=>({card:e,index:a})),min:0,max:1,callback:"harbingerPutBack"}),a},D=e=>{let a=w(e,{name:"Merchant",cost:3,effect:"",type:s.ACTION,cards:1,actions:1});return a.players[a.currentPlayer].playArea.find(e=>"Merchant"===e.name),a},Y=e=>{let a=w(e,{name:"Vassal",cost:3,effect:"",type:s.ACTION,coins:2}),t=a.players[a.currentPlayer];if(0===t.deck.length&&t.discard.length>0&&(t.deck=[...t.discard].sort(()=>Math.random()-.5),t.discard=[]),t.deck.length>0){let e=t.deck.pop();if(t.discard.push(e),a.gameLog.push("".concat(t.name," discards ").concat(e.name," from their deck.")),e.type===s.ACTION&&(a.gameLog.push("".concat(t.name," may play ").concat(e.name,".")),e.cards||e.actions||e.coins||e.buys)){let a=t.discard.indexOf(e);t.discard.splice(a,1),t.hand.push(e)}}return a},H=e=>{let a=e.players[e.currentPlayer];if(e.supply.Silver.length>0){let t=e.supply.Silver.shift();a.deck.push(t),e.gameLog.push("".concat(a.name," gains a Silver onto their deck."))}let t=(e.currentPlayer+1)%2,r=e.players[t],n=r.hand.find(e=>e.type===s.VICTORY);if(n){let a=r.hand.indexOf(n);r.hand.splice(a,1),r.deck.push(n),e.gameLog.push("".concat(r.name," puts ").concat(n.name," on top of their deck."))}else e.gameLog.push("".concat(r.name," reveals a hand with no Victory cards."));return e},W=e=>{let a=w(e,{name:"Poacher",cost:4,effect:"",type:s.ACTION,cards:1,actions:1,coins:1}),t=Object.values(a.supply).filter(e=>0===e.length).length,r=a.players[a.currentPlayer];if(t>0&&r.hand.length>0){let e=Math.min(t,r.hand.length);a.pendingChoice={type:"discard",playerId:a.currentPlayer,prompt:"Discard ".concat(e," card(s) due to empty supply piles"),options:r.hand.map((e,a)=>({card:e,index:a})),min:e,max:e,callback:"militiaDiscard"}}return a},_=e=>{let a=e.players[e.currentPlayer];return a.hand.filter(e=>e.type===s.ACTION).length>0&&(e.pendingChoice={type:"play_action",playerId:e.currentPlayer,prompt:"Choose an Action card to play twice",options:a.hand.map((e,a)=>({card:e,index:a})).filter(e=>{let{card:a}=e;return a.type===s.ACTION}),min:0,max:1,callback:"throneRoomPlay"}),e},q=e=>{let a=e.players[e.currentPlayer];if(e.supply.Gold.length>0){let t=e.supply.Gold.shift();a.discard.push(t),e.gameLog.push("".concat(a.name," gains a Gold."))}let t=(e.currentPlayer+1)%2,r=e.players[t],n=[];for(let e=0;e<2;e++)0===r.deck.length&&r.discard.length>0&&(r.deck=[...r.discard].sort(()=>Math.random()-.5),r.discard=[]),r.deck.length>0&&n.push(r.deck.pop());let c=n.find(e=>e.type===s.TREASURE&&"Copper"!==e.name);if(c){let a=n.indexOf(c);n.splice(a,1),e.trash.push(c),e.gameLog.push("".concat(r.name," trashes ").concat(c.name,"."))}return r.discard.push(...n),e},Z=e=>{let a=e.players[e.currentPlayer];for(;a.hand.length<7&&(0===a.deck.length&&a.discard.length>0&&(a.deck=[...a.discard].sort(()=>Math.random()-.5),a.discard=[]),0!==a.deck.length);){let t=a.deck.pop();t.type===s.ACTION?(a.discard.push(t),e.gameLog.push("".concat(a.name," skips ").concat(t.name,"."))):a.hand.push(t)}return e},F=e=>{let a=w(e,{name:"Sentry",cost:5,effect:"",type:s.ACTION,cards:1,actions:1}),t=a.players[a.currentPlayer],r=[];for(let e=0;e<2;e++)0===t.deck.length&&t.discard.length>0&&(t.deck=[...t.discard].sort(()=>Math.random()-.5),t.discard=[]),t.deck.length>0&&r.push(t.deck.pop());return r.length>0&&r.forEach(e=>{"Curse"===e.name?(a.trash.push(e),a.gameLog.push("".concat(t.name," trashes ").concat(e.name,"."))):"Copper"===e.name?(t.discard.push(e),a.gameLog.push("".concat(t.name," discards ").concat(e.name,"."))):t.deck.push(e)}),a},z=e=>{let a=Object.entries(e.supply).filter(e=>{let[a,t]=e;return t.length>0&&m(a).cost<=5}).map(e=>{let[a]=e;return a});return a.length>0&&(e.pendingChoice={type:"gain",playerId:e.currentPlayer,prompt:"Choose a card to gain to your hand (costing up to 5)",options:a,min:1,max:1,callback:"artisanGain"}),e},K=(e,a)=>{if(!e.pendingChoice)return e;let t=e.pendingChoice,r={...e,players:e.players.map((e,a)=>({...e,hand:[...e.hand],playArea:[...e.playArea],deck:[...e.deck],discard:[...e.discard]})),supply:Object.fromEntries(Object.entries(e.supply).map(e=>{let[a,t]=e;return[a,[...t]]})),trash:[...e.trash],gameLog:[...e.gameLog],pendingChoice:void 0};switch(t.callback){case"militiaDiscard":return $(r,t.playerId,a);case"cellarDiscard":return J(r,t.playerId,a);case"chapelTrash":return Q(r,t.playerId,a);case"remodelTrash":return X(r,t.playerId,a);case"remodelGain":return ee(r,t.playerId,a[0]);case"workshopGain":return ea(r,t.playerId,a[0]);case"throneRoomPlay":return et(r,t.playerId,a[0]);case"librarySkip":return er(r,t.playerId,a);case"sentryActions":return en(r,t.playerId,a);case"artisanGain":return es(r,t.playerId,a[0]);case"artisanPutBack":return ec(r,t.playerId,a[0]);case"harbingerPutBack":return el(r,t.playerId,a[0]);default:return r}},$=(e,a,t)=>{let r=e.players[a];for(let e of(t.sort((e,a)=>a-e),t))if(e>=0&&e<r.hand.length){let a=r.hand.splice(e,1)[0];r.discard.push(a)}return e.gameLog.push("".concat(r.name," discards ").concat(t.length," card(s).")),e},J=(e,a,t)=>{let r=e.players[a];for(let e of(t.sort((e,a)=>a-e),t))if(e>=0&&e<r.hand.length){let a=r.hand.splice(e,1)[0];r.discard.push(a)}for(let e=0;e<t.length;e++)if(0===r.deck.length&&r.discard.length>0&&(r.deck=[...r.discard].sort(()=>Math.random()-.5),r.discard=[]),r.deck.length>0){let e=r.deck.pop();r.hand.push(e)}return e.gameLog.push("".concat(r.name," discards ").concat(t.length," card(s) and draws ").concat(t.length," card(s).")),e},Q=(e,a,t)=>{let r=e.players[a];for(let a of(t.sort((e,a)=>a-e),t))if(a>=0&&a<r.hand.length){let t=r.hand.splice(a,1)[0];e.trash.push(t),e.gameLog.push("".concat(r.name," trashes ").concat(t.name,"."))}return e},X=(e,a,t)=>{let r=e.players[a];if(0===t.length)return e.gameLog.push("".concat(r.name," chooses not to remodel anything.")),e;let n=t[0],s=r.hand[n],c=s.cost+2;r.hand.splice(n,1),e.trash.push(s);let l=Object.entries(e.supply).filter(e=>{let[a,t]=e;return t.length>0&&m(a).cost<=c}).map(e=>{let[a]=e;return a});return l.length>0&&(e.pendingChoice={type:"gain",playerId:a,prompt:"Choose a card to gain (costing up to ".concat(c,")"),options:l,min:1,max:1,callback:"remodelGain"}),e.gameLog.push("".concat(r.name," trashes ").concat(s.name,".")),e},ee=(e,a,t)=>{var r,n;let s=e.players[a],c=null===(r=e.pendingChoice)||void 0===r?void 0:r.options[t];if(c&&(null===(n=e.supply[c])||void 0===n?void 0:n.length)>0){let a=e.supply[c].shift();s.discard.push(a),e.gameLog.push("".concat(s.name," gains ").concat(c,"."))}return e},ea=(e,a,t)=>{var r,n;let s=e.players[a],c=null===(r=e.pendingChoice)||void 0===r?void 0:r.options[t];if(c&&(null===(n=e.supply[c])||void 0===n?void 0:n.length)>0){let a=e.supply[c].shift();s.discard.push(a),e.gameLog.push("".concat(s.name," gains ").concat(c,"."))}return e},et=(e,a,t)=>{let r=e.players[a];if(t>=0&&t<r.hand.length){let a=r.hand[t];a.type===s.ACTION&&e.gameLog.push("".concat(r.name," plays ").concat(a.name," twice with Throne Room."))}return e},er=(e,a,t)=>e,en=(e,a,t)=>e,es=(e,a,t)=>{var r,n;let s=e.players[a],c=null===(r=e.pendingChoice)||void 0===r?void 0:r.options[t];if(c&&(null===(n=e.supply[c])||void 0===n?void 0:n.length)>0){let t=e.supply[c].shift();s.hand.push(t),e.gameLog.push("".concat(s.name," gains ").concat(c," to hand.")),e.pendingChoice={type:"order",playerId:a,prompt:"Choose a card from your hand to put on top of your deck",options:s.hand.map((e,a)=>({card:e,index:a})),min:1,max:1,callback:"artisanPutBack"}}return e},ec=(e,a,t)=>{let r=e.players[a];if(t>=0&&t<r.hand.length){let a=r.hand.splice(t,1)[0];r.deck.push(a),e.gameLog.push("".concat(r.name," puts a card on top of their deck."))}return e},el=(e,a,t)=>{let r=e.players[a];if(t>=0&&t<r.discard.length){let a=r.discard.splice(t,1)[0];r.deck.push(a),e.gameLog.push("".concat(r.name," puts ").concat(a.name," on top of their deck."))}return e};function eo(){let[e,a]=(0,o.useState)(()=>k()),[t,r]=(0,o.useState)(null),[n,i]=(0,o.useState)([]),d=e.players[e.currentPlayer],h=e.players[(e.currentPlayer+1)%2],p=(0,o.useCallback)(t=>{e.phase===c.ACTION&&(a(e=>O(e,t)),r(null))},[e.phase]),u=(0,o.useCallback)(t=>{e.phase===c.BUY&&(a(e=>I(e,t)),r(null))},[e.phase]),m=(0,o.useCallback)(t=>{e.phase===c.BUY&&a(e=>P(e,t))},[e.phase]),g=(0,o.useCallback)(()=>{e.phase===c.ACTION?a(e=>({...e,phase:c.BUY})):e.phase===c.BUY&&a(e=>T(e)),r(null)},[e.phase]),y=(0,o.useCallback)(a=>{if(!e.pendingChoice)return;let t=e.pendingChoice,r=[...n];if(r.includes(a)){let e=r.indexOf(a);r.splice(e,1)}else r.length<(t.max||1)&&r.push(a);i(r)},[e.pendingChoice,n]),f=(0,o.useCallback)(()=>{if(!e.pendingChoice)return;let t=e.pendingChoice;n.length>=(t.min||0)&&n.length<=(t.max||1)&&(a(e=>K(e,n)),i([]))},[e.pendingChoice,n]),x=(0,o.useCallback)(()=>{e.pendingChoice&&0===(e.pendingChoice.min||0)&&(a(e=>K(e,[])),i([]))},[e.pendingChoice]),b=e=>{switch(e.type){case s.TREASURE:return"bg-yellow-100 border-yellow-300 text-yellow-800";case s.VICTORY:return"bg-green-100 border-green-300 text-green-800";case s.ACTION:return"bg-blue-100 border-blue-300 text-blue-800";case s.CURSE:return"bg-purple-100 border-purple-300 text-purple-800";default:return"bg-gray-100 border-gray-300 text-gray-800"}},C=e=>{let{card:a,index:t,onClick:r,isSelected:n=!1,showCount:s=!1,count:c=0}=e;return(0,l.jsxs)("div",{className:"\n        relative border-2 rounded-lg p-2 cursor-pointer transition-all duration-200 text-xs group\n        ".concat(b(a),"\n        ").concat(n?"ring-2 ring-blue-500 transform scale-105":"","\n        ").concat(r?"hover:shadow-md hover:transform hover:scale-105":"","\n        ").concat(s&&0===c?"opacity-50 cursor-not-allowed":"","\n      "),onClick:r&&0!==c?r:void 0,children:[(0,l.jsx)("div",{className:"font-bold text-center mb-1",children:a.name}),(0,l.jsxs)("div",{className:"text-center text-xs",children:["Cost: ",a.cost]}),s&&(0,l.jsx)("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center",children:c}),(0,l.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity z-50 max-w-xs whitespace-normal pointer-events-none",children:[(0,l.jsx)("div",{className:"font-bold mb-1",children:a.name}),(0,l.jsx)("div",{children:a.effect}),(0,l.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]})};if(e.gameEnded){let t=N(e.players[0]),r=N(e.players[1]);return(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Game Over!"}),(0,l.jsxs)("div",{className:"text-lg mb-4",children:[(0,l.jsxs)("div",{children:["Player 1: ",t," Victory Points"]}),(0,l.jsxs)("div",{children:["Player 2: ",r," Victory Points"]})]}),(0,l.jsx)("div",{className:"text-xl font-bold mb-4",children:void 0!==e.winner?"Player ".concat(e.winner+1," Wins!"):"It's a Tie!"}),(0,l.jsx)("button",{onClick:()=>a(k()),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"New Game"})]})}return(0,l.jsxs)("div",{className:"max-w-6xl mx-auto p-4",children:[(0,l.jsxs)("div",{className:"mb-4 p-4 bg-gray-100 dark:bg-gray-800 rounded-lg",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold",children:[d.name,"'s Turn"]}),(0,l.jsxs)("div",{className:"text-sm",children:["Phase: ",(0,l.jsx)("span",{className:"font-bold",children:e.phase.toUpperCase()})]})]}),(0,l.jsxs)("div",{className:"flex gap-4 text-sm",children:[(0,l.jsxs)("span",{children:["Actions: ",(0,l.jsx)("strong",{children:d.actions})]}),(0,l.jsxs)("span",{children:["Buys: ",(0,l.jsx)("strong",{children:d.buys})]}),(0,l.jsxs)("span",{children:["Coins: ",(0,l.jsx)("strong",{children:d.coins})]})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Supply"}),(0,l.jsxs)("div",{className:"mb-2 text-sm text-gray-600 dark:text-gray-400",children:[e.phase===c.BUY&&(0,l.jsxs)("p",{children:["Click cards to buy them (you have ",d.coins," coin",1!==d.coins?"s":""," and ",d.buys," buy",1!==d.buys?"s":""," remaining)"]}),e.phase===c.ACTION&&(0,l.jsx)("p",{children:"Play Action cards from your hand first, then advance to Buy phase"}),(0,l.jsx)("p",{className:"text-xs mt-1",children:"Hover over cards to see their effects"})]}),(0,l.jsx)("div",{className:"grid grid-cols-6 gap-2",children:Object.entries(e.supply).map(a=>{let[t,r]=a,n=r[0]||{name:t,cost:0,effect:"",type:s.TREASURE},o=e.phase===c.BUY&&d.coins>=n.cost&&d.buys>0&&r.length>0;return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(C,{card:n,onClick:()=>m(t),showCount:!0,count:r.length}),o&&(0,l.jsx)("div",{className:"absolute -top-1 -left-1 bg-blue-500 text-white rounded-full w-4 h-4 text-xs flex items-center justify-center animate-pulse",children:"$"})]},t)})})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("h3",{className:"text-lg font-bold mb-2",children:[d.name,"'s Hand"]}),(0,l.jsxs)("div",{className:"mb-2 text-sm text-gray-600 dark:text-gray-400",children:[e.phase===c.ACTION&&(0,l.jsxs)("p",{children:["Click Action cards to play them (you have ",d.actions," action",1!==d.actions?"s":""," remaining)"]}),e.phase===c.BUY&&(0,l.jsx)("p",{children:"Click Treasure cards to play them for coins, then buy cards from the supply"})]}),(0,l.jsx)("div",{className:"grid grid-cols-8 gap-2",children:d.hand.map((a,n)=>{let o=e.phase===c.ACTION&&a.type===s.ACTION&&d.actions>0||e.phase===c.BUY&&a.type===s.TREASURE;return(0,l.jsxs)("div",{className:"relative cursor-pointer",onClick:()=>{e.phase===c.ACTION&&a.type===s.ACTION&&d.actions>0?p(n):e.phase===c.BUY&&a.type===s.TREASURE?u(n):r(t===n?null:n)},children:[(0,l.jsx)(C,{card:a,index:n,isSelected:t===n}),o&&(0,l.jsx)("div",{className:"absolute -top-1 -right-1 bg-green-500 text-white rounded-full w-4 h-4 text-xs flex items-center justify-center animate-pulse pointer-events-none",children:"!"})]},n)})})]}),d.playArea.length>0&&(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:"In Play"}),(0,l.jsx)("div",{className:"grid grid-cols-8 gap-2",children:d.playArea.map((e,a)=>(0,l.jsx)(C,{card:e},a))})]}),(0,l.jsx)("div",{className:"flex gap-2 mb-4",children:(0,l.jsx)("button",{onClick:g,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded",disabled:!!e.pendingChoice,children:e.phase===c.ACTION?"Go to Buy Phase":"End Turn"})}),e.pendingChoice&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg max-w-2xl w-full mx-4 max-h-96 overflow-y-auto",children:[(0,l.jsxs)("h3",{className:"text-lg font-bold mb-4",children:[e.players[e.pendingChoice.playerId].name,": ",e.pendingChoice.prompt]}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-4",children:e.pendingChoice.options.map((a,t)=>{var r;let c=n.includes(t),o="string"==typeof a?{name:a,cost:0,effect:"",type:s.TREASURE}:a.card;return(0,l.jsxs)("div",{className:"\n                      border-2 rounded-lg p-2 cursor-pointer transition-all duration-200 text-xs\n                      ".concat(b(o),"\n                      ").concat(c?"ring-2 ring-blue-500 transform scale-105":"","\n                      hover:shadow-md hover:transform hover:scale-105\n                    "),onClick:()=>y(t),children:[(0,l.jsx)("div",{className:"font-bold text-center mb-1",children:o.name}),(null===(r=e.pendingChoice)||void 0===r?void 0:r.type)==="gain"&&(0,l.jsxs)("div",{className:"text-center text-xs",children:["Cost: ",o.cost]})]},t)})}),(0,l.jsxs)("div",{className:"flex gap-2 justify-end",children:[0===(e.pendingChoice.min||0)&&(0,l.jsx)("button",{onClick:x,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded",children:"Skip"}),(0,l.jsxs)("button",{onClick:f,disabled:n.length<(e.pendingChoice.min||0)||n.length>(e.pendingChoice.max||1),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-2 rounded",children:["Confirm (",n.length,"/",e.pendingChoice.min||0,"-",e.pendingChoice.max||1,")"]})]})]})}),(0,l.jsxs)("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-lg",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:h.name}),(0,l.jsxs)("div",{className:"text-sm",children:[(0,l.jsxs)("span",{children:["Hand: ",h.hand.length," cards"]}),(0,l.jsxs)("span",{className:"ml-4",children:["Deck: ",h.deck.length," cards"]}),(0,l.jsxs)("span",{className:"ml-4",children:["Discard: ",h.discard.length," cards"]})]})]}),(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Game Log"}),(0,l.jsx)("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded-lg h-32 overflow-y-auto",children:e.gameLog.slice(-10).map((e,a)=>(0,l.jsx)("div",{className:"text-sm mb-1",children:e},a))})]})]})}function ei(){let[e,a]=(0,o.useState)(!1);return(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,l.jsx)(i.Z,{children:(0,l.jsx)(p,{})}),(0,l.jsx)("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-8",children:e?(0,l.jsx)(eo,{}):(0,l.jsx)("div",{className:"text-center",children:(0,l.jsx)("button",{onClick:()=>a(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg text-lg transition-colors",children:"Start New Game"})})})]})}},9807:function(e,a,t){"use strict";t.d(a,{Z:function(){return i}});var r=t(7437),n=t(5595),s=t(5475),c=t(2265);function l(){let[e,a]=(0,c.useState)([]),[t,n]=(0,c.useState)([]),[s,l]=(0,c.useState)(""),[o,i]=(0,c.useState)("");function d(e){let a=e.previousElementSibling;for(;a;){if("H2"===a.tagName&&a.id)return a.id;a=a.previousElementSibling}return""}(0,c.useEffect)(()=>{let e=Array.from(document.querySelectorAll("h1, h2, h3")).filter(e=>e.id),t=e.filter(e=>"H1"===e.tagName||"H2"===e.tagName).map(e=>({id:e.id,text:e.textContent||"",level:"H1"===e.tagName?1:2})),r=e.filter(e=>"H3"===e.tagName).map(e=>({id:e.id,text:e.textContent||"",level:3,parentH2:d(e)}));a(t),n(r);let s=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){if(l(e.target.id),"H2"===e.target.tagName)i(e.target.id);else if("H1"===e.target.tagName)i("");else if("H3"===e.target.tagName){let a=d(e.target);a&&i(a)}}})},{rootMargin:"-100px 0px -66%"});return e.forEach(e=>{s.observe(e)}),()=>s.disconnect()},[]);let h=t.filter(e=>e.parentH2===o);return 0===e.length?null:(0,r.jsxs)("nav",{className:"sticky top-8 max-h-[calc(100vh-4rem)] overflow-y-auto pr-4 hidden lg:block",children:[(0,r.jsx)("h2",{className:"toc-heading",children:"Table of Contents"}),(0,r.jsx)("ul",{className:"space-y-2",children:e.map(e=>(0,r.jsxs)("li",{children:[(0,r.jsx)("a",{href:"#".concat(e.id),className:"\n                block transition-colors\n                ".concat(2===e.level?"ml-4":"","\n                ").concat(s===e.id?"toc-link-active":"toc-link","\n              "),onClick:a=>{var t;a.preventDefault(),null===(t=document.getElementById(e.id))||void 0===t||t.scrollIntoView({behavior:"smooth"})},children:e.text}),2===e.level&&e.id===o&&h.length>0&&(0,r.jsx)("ul",{className:"mt-1 ml-3 space-y-1 border-l-2 toc-divider pl-2",children:h.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:"#".concat(e.id),className:"\n                        block text-sm transition-colors\n                        ".concat(s===e.id?"toc-link-active":"toc-link","\n                      "),onClick:a=>{var t;a.preventDefault(),null===(t=document.getElementById(e.id))||void 0===t||t.scrollIntoView({behavior:"smooth"})},children:e.text})},e.id))})]},e.id))})]})}let o={h1:e=>{var a;return(0,r.jsx)("h1",{className:"text-4xl font-bold mb-8 dark:text-white light-mode:text-gray-900",id:"heading-".concat(null===(a=e.children)||void 0===a?void 0:a.toString().toLowerCase().replace(/\s+/g,"-")),...e})},h2:e=>{var a;return(0,r.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 dark:text-white light-mode:text-gray-900 border-l-4 border-emerald-500 pl-3",id:"heading-".concat(null===(a=e.children)||void 0===a?void 0:a.toString().toLowerCase().replace(/\s+/g,"-")),...e})},h3:e=>{var a;return(0,r.jsx)("h3",{className:"text-xl font-bold mt-6 mb-3 dark:text-gray-100 light-mode:text-gray-800",id:"heading-".concat(null===(a=e.children)||void 0===a?void 0:a.toString().toLowerCase().replace(/\s+/g,"-")),...e})},p:e=>(0,r.jsx)("p",{className:"mb-4 dark:text-gray-300 light-mode:text-gray-700 leading-relaxed",children:e.children}),a:e=>{var a,t,n;return(0,r.jsxs)("a",{...e,className:"!inline-flex !items-center !gap-1 dark:!text-emerald-400 dark:hover:!text-emerald-300 light-mode:!text-emerald-600 light-mode:hover:!text-emerald-700 !transition-colors",target:(null===(a=e.href)||void 0===a?void 0:a.startsWith("http"))?"_blank":void 0,rel:(null===(t=e.href)||void 0===t?void 0:t.startsWith("http"))?"noopener noreferrer":void 0,children:[e.children,(null===(n=e.href)||void 0===n?void 0:n.startsWith("http"))&&(0,r.jsx)("span",{className:"text-xs opacity-50 group-hover:opacity-100 transition-opacity",children:"↗"})]})},ul:e=>(0,r.jsx)("ul",{className:"list-disc list-outside mb-4 ml-5 space-y-2",...e}),li:e=>(0,r.jsx)("li",{className:"dark:text-gray-300 light-mode:text-gray-700",...e}),table:e=>(0,r.jsx)("div",{className:"overflow-x-auto mb-8",children:(0,r.jsx)("table",{className:"min-w-full table-auto border-collapse rounded-lg overflow-hidden",...e})}),th:e=>(0,r.jsx)("th",{className:"px-4 py-3 dark:bg-slate-700 light-mode:bg-gray-200 text-left font-medium dark:text-gray-100 light-mode:text-gray-800 uppercase text-sm tracking-wider",...e}),td:e=>(0,r.jsx)("td",{className:"px-4 py-3 dark:bg-slate-800 light-mode:bg-white dark:text-gray-300 light-mode:text-gray-700 dark:border-t dark:border-slate-700 light-mode:border-t light-mode:border-gray-200",...e}),img:e=>(0,r.jsx)("img",{...e,className:"rounded-lg shadow-lg dark:border dark:border-slate-700 light-mode:border light-mode:border-gray-200"}),figcaption:e=>(0,r.jsx)("figcaption",{...e,className:"text-center text-sm dark:text-gray-400 light-mode:text-gray-500 mt-3 italic"}),figure:e=>(0,r.jsx)("figure",{...e,className:"my-8"}),code:e=>(0,r.jsx)("code",{className:"dark:bg-slate-800 light-mode:bg-gray-100 dark:text-emerald-300 light-mode:text-emerald-600 px-1 py-0.5 rounded text-sm",...e}),blockquote:e=>(0,r.jsx)("blockquote",{className:"border-l-4 border-emerald-500 pl-4 py-1 italic dark:text-gray-400 light-mode:text-gray-500",...e})};function i(e){let{children:a}=e,t=(0,s.usePathname)(),c=t.startsWith("/blog/")&&"/blog"!==t;return(0,r.jsx)(n.Z,{components:o,children:(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[200px_minmax(0,1fr)] gap-8",children:[c&&(0,r.jsx)(l,{}),(0,r.jsx)("article",{className:"prose blog-content\n          ".concat(c?"":"col-span-full"),children:a})]})})}},5595:function(e,a,t){"use strict";t.d(a,{Z:function(){return l},a:function(){return c}});var r=t(2265);let n={},s=r.createContext(n);function c(e){let a=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),r.createElement(s.Provider,{value:a},e.children)}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1333)}),_N_E=e.O()}]);